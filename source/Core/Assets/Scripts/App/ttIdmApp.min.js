(function(n){function i(n,t){t.when("/",{controller:"HomeCtrl",templateUrl:n+"/assets/Templates.home.html"}).when("/callback",{templateUrl:n+"/assets/Templates.message.html",controller:"CallbackCtrl"}).when("/logout",{template:"<h2>Logging out...<\/h2>",controller:"LogoutCtrl"}).when("/error",{templateUrl:n+"/assets/Templates.message.html"}).otherwise({redirectTo:"/"})}function r(n,t,i,r,u){function f(){t.layout.showLogout=u.token&&!u.token.expired;i.get().then(function(n){t.layout.username=n.data.currentUser.username;t.layout.links=n.links})}t.layout={};u.addOnTokenObtained(f);f();u.addOnTokenRemoved(function(){t.layout.links=null;t.layout.showLogout=!1});u.isTokenNeeded&&(t.layout.showLogin=!0,r.path()!=="/"&&r.path()!=="/callback"&&r.path()!=="/error"&&r.path()!=="/logout"&&r.path("/"));u.addOnTokenRemoved(function(){t.layout.showLogin=!0});u.addOnTokenObtained(function(){t.layout.showLogin=!1});u.addOnTokenExpired(function(){r.url("/error");n.errors=["Your session has expired."]});t.login=function(){u.redirectForToken()}}function u(){}function f(n,t,i){n.processTokenCallback(function(){t.url("/")},function(n){i.errors=[n]})}function e(n,t){n.removeToken();t.url("/")}var t=n.module("ttIdmApp",["ngRoute","ttIdm","ttIdmUI","ttIdmUsers","ttIdmRoles"]);i.$inject=["PathBase","$routeProvider"];t.config(i);r.$inject=["$rootScope","$scope","idmApi","$location","idmTokenManager"];t.controller("LayoutCtrl",r);u.$inject=[];t.controller("HomeCtrl",u);f.$inject=["idmTokenManager","$location","$rootScope"];t.controller("CallbackCtrl",f);e.$inject=["idmTokenManager","$location"];t.controller("LogoutCtrl",e)})(angular);
/*
//# sourceMappingURL=ttIdmApp.min.js.map
*/